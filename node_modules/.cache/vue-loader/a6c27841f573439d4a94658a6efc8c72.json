{"remainingRequest":"/Users/akramweheba/Desktop/pdg-auction/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/akramweheba/Desktop/pdg-auction/src/views/AddItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/akramweheba/Desktop/pdg-auction/src/views/AddItem.vue","mtime":1617373418016},{"path":"/Users/akramweheba/Desktop/pdg-auction/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/akramweheba/Desktop/pdg-auction/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/akramweheba/Desktop/pdg-auction/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/akramweheba/Desktop/pdg-auction/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IGRiIH0gZnJvbSAnQC9kYic7CmltcG9ydCBmaXJlYmFzZSBmcm9tICJmaXJlYmFzZS9hcHAiOwppbXBvcnQgJ2ZpcmViYXNlL3N0b3JhZ2UnCgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkFkZEl0ZW0iLAogIHRpdGxlOiAiQWRkIEl0ZW0iLAogIG1ldGhvZHM6IHsKICAgIHByZXNzZWQoKXsKICAgICAgaWYodGhpcy4kcmVmcy5mb3JtLnZhbGlkYXRlKCkpIHsKICAgICAgICBjb25zdCBpbWdQYXRoID0gYGltYWdlcy8ke3RoaXMuZmlsZS5uYW1lfWA7CiAgICAgICAgY29uc3Qgc3RvcmFnZVJlZiA9IGZpcmViYXNlLnN0b3JhZ2UoKS5yZWYoKTsKICAgICAgICBzdG9yYWdlUmVmLmNoaWxkKGltZ1BhdGgpLnB1dCh0aGlzLmZpbGUpLnRoZW4oKCkgPT4gewogICAgICAgICAgY29uc3Qgc3RhcnNSZWYgPSBzdG9yYWdlUmVmLmNoaWxkKGltZ1BhdGgpOwogICAgICAgICAgc3RhcnNSZWYuZ2V0RG93bmxvYWRVUkwoKQogICAgICAgICAgICAgIC50aGVuKCh1cmwpID0+IHsKICAgICAgICAgICAgICAgIHRoaXMuaW1hZ2VVcmwgPSB1cmw7CiAgICAgICAgICAgICAgICBkYi5jb2xsZWN0aW9uKCJpdGVtcyIpLmRvYyh0aGlzLm5hbWUpLnNldCh7CiAgICAgICAgICAgICAgICAgIG5hbWU6IHRoaXMubmFtZSwKICAgICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IHRoaXMuZGVzY3JpcHRpb24sCiAgICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogdGhpcy5jdXJyZW50UHJpY2UsCiAgICAgICAgICAgICAgICAgIGN1cnJlbnRCaWRkZXI6IHRoaXMuY3VycmVudEJpZGRlciwKICAgICAgICAgICAgICAgICAgcGhvbmVOdW1iZXI6IHRoaXMucGhvbmVOdW1iZXIsCiAgICAgICAgICAgICAgICAgIGltYWdlVXJsOiB0aGlzLmltYWdlVXJsLAogICAgICAgICAgICAgICAgfSkKICAgICAgICAgICAgICB9KQogICAgICAgIH0pCiAgICAgICAgdGhpcy4kcm91dGVyLnJlcGxhY2Uoe25hbWU6ICdBZG1pbid9KTsKICAgICAgfQogICAgfSwKICAgIGhhbmRsZUZpbGVVcGxvYWQoKXsKICAgICAgdGhpcy5maWxlID0gdGhpcy4kcmVmcy5maWxlLmZpbGVzWzBdOwogICAgfSwKICB9LAogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBuYW1lOiAnJywKICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICBjdXJyZW50UHJpY2U6IDAsCiAgICAgIGN1cnJlbnRCaWRkZXI6ICdObyBCaWRzIFlldCEnLAogICAgICBwaG9uZU51bWJlcjogMCwKICAgICAgZmlsZTogJycsCiAgICAgIGltYWdlVXJsOiAnQC9hc3NldHMvcGRnX2xvZ28uanBnJywKICAgICAgaW5wdXRSdWxlczogWwogICAgICAgICAgdiA9PiB2Lmxlbmd0aCA+PTIgfHwgJ3BsZWFzZSBlbnRlciBhIG5hbWUgZm9yIHRoZSBpdGVtJwogICAgICBdCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["AddItem.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"AddItem.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <div class=\"text-center mx-2 my-4\">\n      <h1>Adding Item</h1>\n    </div>\n    <div class=\"px-2 my-3 mx-6\">\n      <v-form ref=\"form\">\n        <v-text-field\n          label=\"name\"\n          v-model=\"name\"\n          :rules=\"inputRules\"\n          required\n        ></v-text-field>\n        <v-textarea\n            label=\"description\"\n            v-model=\"description\"\n            :rules=\"inputRules\"\n            required\n        ></v-textarea>\n        <v-text-field\n            type=\"number\"\n            label=\"starting price\"\n            v-model.number=\"currentPrice\"\n            required\n        ></v-text-field>\n        <label>\n          <input type=\"file\" id=\"file\" ref=\"file\" v-on:change=\"handleFileUpload()\"/>\n        </label>\n        <div class=\"text-center mt-12 mb-4\">\n          <v-btn @click=\"pressed\">Add Item</v-btn>\n        </div>\n      </v-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { db } from '@/db';\nimport firebase from \"firebase/app\";\nimport 'firebase/storage'\n\nexport default {\n  name: \"AddItem\",\n  title: \"Add Item\",\n  methods: {\n    pressed(){\n      if(this.$refs.form.validate()) {\n        const imgPath = `images/${this.file.name}`;\n        const storageRef = firebase.storage().ref();\n        storageRef.child(imgPath).put(this.file).then(() => {\n          const starsRef = storageRef.child(imgPath);\n          starsRef.getDownloadURL()\n              .then((url) => {\n                this.imageUrl = url;\n                db.collection(\"items\").doc(this.name).set({\n                  name: this.name,\n                  description: this.description,\n                  currentPrice: this.currentPrice,\n                  currentBidder: this.currentBidder,\n                  phoneNumber: this.phoneNumber,\n                  imageUrl: this.imageUrl,\n                })\n              })\n        })\n        this.$router.replace({name: 'Admin'});\n      }\n    },\n    handleFileUpload(){\n      this.file = this.$refs.file.files[0];\n    },\n  },\n  data() {\n    return {\n      name: '',\n      description: '',\n      currentPrice: 0,\n      currentBidder: 'No Bids Yet!',\n      phoneNumber: 0,\n      file: '',\n      imageUrl: '@/assets/pdg_logo.jpg',\n      inputRules: [\n          v => v.length >=2 || 'please enter a name for the item'\n      ]\n    }\n  }\n}\n</script>\n\n<style scoped>\n\n</style>"]}]}